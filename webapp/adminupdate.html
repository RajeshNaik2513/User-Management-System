<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Update User | User Management</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}
body{min-height:100vh;background:url('https://res.cloudinary.com/dpxrmf3vc/image/upload/v1761115864/WhatsApp_Image_2025-10-22_at_12.02.17_58a4599f_gj5gws.jpg') no-repeat center/cover;color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;position:relative;perspective:1000px;}
body::before{content:"";position:absolute;inset:0;background:rgba(0,0,0,0.6);backdrop-filter:blur(3px);z-index:0;}

.container{position:relative;z-index:1;width:95%;max-width:450px;background:rgba(255,255,255,0.08);border-radius:20px;box-shadow:0 0 30px rgba(0,198,255,0.4);padding:30px;overflow:hidden;animation:fadeIn 1.2s ease-out;}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}

.logo-wrapper{display:flex;flex-direction:column;align-items:center;margin-bottom:25px;}
.logo{width:110px;height:110px;border-radius:50%;object-fit:cover;border:3px solid #00c6ff;box-shadow:0 0 25px #00c6ff;animation:rotate3D 6s linear infinite, float 3s ease-in-out infinite;}
@keyframes rotate3D{0%{transform:rotateY(0deg);}100%{transform:rotateY(360deg);}}
@keyframes float{0%,100%{transform:translateY(0);}50%{transform:translateY(-12px);}}

h2{text-align:center;color:#aeefff;text-shadow:0 0 10px #00c6ff;font-size:1.8rem;margin-bottom:10px;}

input{width:100%;padding:12px;margin-top:12px;border-radius:10px;border:none;outline:none;font-size:16px;background:rgba(255,255,255,0.18);color:#ffffff;caret-color:#ffffff;}
input::placeholder{color:rgba(255,255,255,0.85);} 

button{width:100%;padding:12px;border:none;border-radius:25px;font-size:16px;cursor:pointer;margin-top:18px;background:linear-gradient(135deg,#ff416c,#ff4b2b);color:#fff;font-weight:600;box-shadow:0 0 15px #ff416c;}
button:hover{background:linear-gradient(135deg,#7ee8fa,#ff9a9e);box-shadow:0 0 25px #7ee8fa,0 0 40px #ff9a9e;transform:translateY(-2px);} 

/* Toast */
#toast{visibility:hidden;position:fixed;top:25px;right:25px;background:#4CAF50;color:white;padding:14px 20px;border-radius:8px;opacity:0;z-index:9999;transition:opacity .4s;}

/* Loader */
#loader{display:none;border:4px solid white;border-top:4px solid #ff4b2b;width:35px;height:35px;border-radius:50%;animation:spin 1s linear infinite;margin:auto;margin-top:12px;}
@keyframes spin{100%{transform:rotate(360deg);}}

.back-btn{margin-top:15px;display:block;text-align:center;color:#aeefff;text-decoration:none;font-size:0.9rem;}
.back-btn:hover{text-decoration:underline;}

</style>
</head>
<body>
<div class="container">
  <div class="logo-wrapper">
    <img class="logo" src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="User Logo">
    <h2>Update User</h2>
  </div>

  <input type="number" id="uid" placeholder="Enter User ID to Search">
  <button onclick="fetchUser()">Get User Details</button>
  <div id="loader"></div>

  <form action="updateuser" method="post">
    <input type="hidden" name="id" id="id">
    <input type="text" name="fname" id="fname" placeholder="First Name" required>
    <input type="text" name="lname" id="lname" placeholder="Last Name" required>
    <input type="email" name="email" id="email" placeholder="Email" required>
    <input type="number" name="mobile" id="mobile" placeholder="Mobile" required>
    <button type="submit">Update User</button>
  </form>

  <a href="admindashboard.html" class="back-btn">Back to Dashboard</a>
</div>

<div id="toast"></div>

<script>
function showToast(msg, bg = "green"){
  const toast = document.getElementById("toast");
  toast.innerText = msg;
  toast.style.background = bg;
  toast.style.visibility = "visible";
  toast.style.opacity = "1";
  setTimeout(()=>{toast.style.opacity="0";toast.style.visibility="hidden";},3000);
}

function fetchUser(){
  const uid = document.getElementById("uid").value;
  const loader = document.getElementById("loader");

  if(uid === "") return showToast("Enter User ID!", "red");

  loader.style.display = "block";

  fetch("Getuser?id=" + uid)
    .then(res => res.text())
    .then(data => {
      loader.style.display = "none";

      if(data === "NOT_FOUND") return showToast("User Not Found!", "red");
      if(data === "TECHNICAL_ERROR") return showToast("Server Error!", "red");

      const user = data.split(",");
      document.getElementById("id").value = uid;
      document.getElementById("fname").value = user[0];
      document.getElementById("lname").value = user[1];
      document.getElementById("email").value = user[2];
      document.getElementById("mobile").value = user[3];

      showToast("User Data Loaded âœ…");
    })
    .catch(()=>{
      loader.style.display = "none";
      showToast("Error fetching data!", "red");
    });
}
</script>
</body>
</html>